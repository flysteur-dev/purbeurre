{"version":3,"sources":["serviceWorker.js","clients/Ingredient.js","components/Search.js","components/Filter.js","components/Results.js","Home.js","clients/Recipe.js","Recipe.js","index.js"],"names":["isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","GET_INGREDIENTS","gql","_templateObject","ADD_INGREDIENT","_templateObject2","resolvers","Mutation","addIngredient","__","_ref","_ref2","name","cache","previous","readQuery","query","newIngredient","__typename","id","ingredients","length","_","maxBy","data","concat","Object","toConsumableArray","writeData","Search","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleChange","event","exist","value","target","suggests","slice","filter","ingredient","startsWith","toLower","allowNew","unshift","isNew","clear","setState","addToFilter","suggest","filterByIngredient","_input","focus","autoFocus","bind","assertThisInitialized","_this2","map","react_default","a","createElement","react_apollo_esm","mutation","variables","onCompleted","key","onClick","className","ref","c","onChange","placeholder","Component","Filter","remove","removeFilter","update","time","updateFilter","filters","cookingtime","min","max","worktime","js_default","maxValue","minValue","formatLabel","Results","listItems","items","item","react_router_dom","to","title","book","description","Home","addFilter","prevState","times","cookbookFiltered","cookbook","recipe","difference","components_Search","components_Filter","components_Results","GET_RECIPES","Recipe_templateObject","GET_RECIPE","Recipe_templateObject2","ADD_RECIPE","_templateObject3","DELETE_RECIPE","_templateObject4","Query","getRecipe","addRecipe","_ref3","_ref4","page","people","newRecipe","deleteRecipe","_ref5","_ref6","i","Recipe","handleInputChange","defineProperty","handleInputQuantityChange","toUpdate","attributes","qtx","handleInputDeletion","row","splice","idIngredient","redirectToHome","history","push","objectSpread","params","readOnly","n","ingredientsList","disabled","type","assign","data-pos","style","width","InMemoryCache","persistCache","storage","localStorage","getItem","warn","client","ApolloClient","merge","ingredientResolvers","recipeResolvers","ReactDOM","render","loading","basename","process","react_router","exact","path","src_Home","component","r","src_Recipe","document","getElementById","URL","href","origin","addEventListener","fetch","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.f31133de.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import _ from 'lodash';\nimport gql from 'graphql-tag';\n\n//Define\nexport const INGREDIENT_TYPE = 'Ingredient';\n\n//Queries\nexport const GET_INGREDIENTS = gql`\n\tquery {\n\t\tingredients @client {\n\t\t\tid,\n\t\t\tname\n\t\t}\n\t}\n`;\n\nexport const ADD_INGREDIENT = gql`\n\tmutation addIngredient($name: String!) {\n\t\taddIngredient(name: $name) @client\n\t}\n`;\n\n//Resolvers\nexport const resolvers = {\n\tMutation: {\n\n\t\t//Add Ingredient\n\t\t//Input: name\n\t\t//Output: Created Ingredient\n\t\taddIngredient(__, { name }, { cache }) {\n\t\t\tconst previous = cache.readQuery({ query: GET_INGREDIENTS });\n\t\t\tconst newIngredient = {\n\t\t\t\t__typename: INGREDIENT_TYPE,\n\t\t\t\tid: (previous.ingredients.length) ? _.maxBy(previous.ingredients, 'id').id + 1 : 1,\n\t\t\t\tname\n\t\t\t};\n\t\t\tconst data = {\n\t\t\t\tingredients: [...previous.ingredients, newIngredient],\n\t\t\t};\n\t\t\tcache.writeData({ data });\n\t\t\treturn newIngredient;\n\t\t},\n\t}\n};","import React, { Component } from 'react';\nimport { Mutation } from 'react-apollo';\nimport _ from 'lodash';\n\nimport '../App.scss';\n\n//Queries\nimport { ADD_INGREDIENT } from '../clients/Ingredient';\n\nclass Search extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tallowNew:  this.props.allowNew  ? true : false,\n\t\t\tautoFocus: this.props.autoFocus ?Â true : false,\n\t\t\tvalue:     '',\n\t\t\tsuggests:  []\n\t\t};\n\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t}\n\n\thandleChange = (event) => {\n\t\t//Suggestion based on available app ingredients (5 items maximum)\n\t\tlet exist    = false;\n\t\tlet value    = event.target.value;\n\t\tlet suggests = _.slice(_.filter(this.props.ingredients, (ingredient) => {\n\t\t\tif (ingredient.name == value) exist = true;\n\t\t\treturn _.startsWith(ingredient.name, _.toLower(value));\n\t\t}), 0, 5);\n\n\t\t//Allow adding new ingredient\n\t\tif (this.state.allowNew && !exist && value != \"\") {\n\t\t\tsuggests.unshift({\n\t\t\t\tid:    0,\n\t\t\t\tname:  _.toLower(value),\n\t\t\t\tisNew: true,\n\t\t\t});\n\t\t}\n\n\t\tif (value == \"\") {\n\t\t\tthis.clear();\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tvalue,\n\t\t\t\tsuggests\n\t\t\t});\n\t\t}\n\t}\n\n\tclear = () => {\n\t\tthis.setState({\n\t\t\tvalue: '',\n\t\t\tsuggests: []\n\t\t})\n\t}\n\n\taddToFilter = (suggest) => {\n\t\tthis.props.filterByIngredient(suggest);\n\t\tthis.clear();\n\n\t\t//Force autofocus after component update\n\t\tthis._input.focus();\n\t}\n\n\trender() {\n\t\tconst suggests = this.state.suggests.map((suggest) => {\n\t\t\tif (!suggest.isNew)\n\t\t\t\treturn (\n\t\t\t\t\t<li\n\t\t\t\t\t\tkey={`s_${suggest.id}`}\n\t\t\t\t\t\tonClick={() => this.addToFilter(suggest)}>\n\t\t\t\t\t\t{suggest.name}\n\t\t\t\t\t</li>\n\t\t\t\t);\n\n\t\t\treturn (\n\t\t\t\t<Mutation\n\t\t\t\t\tmutation={ADD_INGREDIENT}\n\t\t\t\t\tvariables={{ name : suggest.name }}\n\t\t\t\t\tonCompleted={({addIngredient}) => this.addToFilter(addIngredient)}>\n\t\t\t\t\t{addIngredient => (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tkey={`s_${suggest.id}`}\n\t\t\t\t\t\t\tonClick={addIngredient}>\n\t\t\t\t\t\t\t(+) {suggest.name}..\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)}\n\t\t\t\t</Mutation>\n\t\t\t)\n\t\t});\n\n\t\treturn (\n\t\t\t<div className=\"Search\">\n\t\t\t\t<input\n\t\t\t\t\tref={c => (this._input = c)}\n\t\t\t\t\tautoFocus={this.state.autoFocus}\n\t\t\t\t\tvalue={this.state.value}\n\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\tplaceholder=\"Search ingredients..\"\n\t\t\t\t/>\n\t\t\t\t<ul className=\"Suggests\">{suggests}</ul>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Search;\n","import React, { Component } from 'react';\nimport InputRange from 'react-input-range';\n\nimport '../App.scss';\nimport 'react-input-range/lib/css/index.css';\n\nclass Filter extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\t//Default (in minutes)\n\t\t\tcookingtime: { min: 0, max: 120 },\n\t\t\tworktime:    { min: 0, max: 120 }\n\t\t};\n\t}\n\n\tremove = (suggest) => {\n\t\tthis.props.removeFilter(suggest);\n\t}\n\n\tupdate = (time) => {\n\t\tthis.setState(time, () => {\n\t\t\tthis.props.updateFilter(this.state);\n\t\t});\n\t}\n\n\tfilters = (props) => {\n\t\treturn props.filters.map((filter) => {\n\t\t\treturn <li key={`f_${filter.id}`} onClick={() => this.remove(filter)}>{filter.name}</li>\n\t\t})\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"Filter\">\n\t\t\t\t<p className=\"label\">working time (mn)</p>\n\t\t\t\t<InputRange\n\t\t\t\t\tmaxValue={120}\n\t\t\t\t\tminValue={0}\n\t\t\t\t\tformatLabel={value => `${value}`}\n\t\t\t\t\tvalue={this.state.worktime}\n\t\t\t\t\tonChange={worktime => this.update({ worktime })} />\n\n\t\t\t\t<p className=\"label\">cooking time (mn)</p>\n\t\t\t\t<InputRange\n\t\t\t\t\tmaxValue={120}\n\t\t\t\t\tminValue={0}\n\t\t\t\t\tformatLabel={value => `${value}`}\n\t\t\t\t\tvalue={this.state.cookingtime}\n\t\t\t\t\tonChange={cookingtime => this.update({ cookingtime })} />\n\n\t\t\t\t<ul>\n\t\t\t\t\t{this.filters(this.props)}\n\t\t\t\t</ul>\n\n\t\t\t\t<p className=\"clear\">&times; Clear filter</p>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Filter;\n","import React, { Component } from 'react';\nimport { Link } from \"react-router-dom\";\n\nimport '../App.scss';\n\nclass Results extends Component {\n\n\tlistItems = (props) => {\n\t\treturn props.items.map((item) => {\n\t\t\treturn (\n\t\t\t\t<Link key={`r_${item.id}`} to={`/recipe/${item.id}`}>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<div className=\"title\">{item.title}</div>\n\t\t\t\t\t\t<div className=\"book\">{item.book}</div>\n\t\t\t\t\t\t<div className=\"desc\">{item.description}</div>\n\t\t\t\t\t\t<div className=\"items\">{props.filters.length} / {item.ingredients.length} required</div>\n\t\t\t\t\t</li>\n\t\t\t\t</Link>\n\t\t\t)\n\t\t})\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<ul className=\"Results\">\n\t\t\t\t{this.listItems(this.props)}\n\t\t\t</ul>\n\t\t);\n\t}\n}\n\nexport default Results;\n","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport { Query } from 'react-apollo';\nimport { Link } from \"react-router-dom\";\n\n//Styles\nimport './App.scss';\n\n//Components\nimport Search  from './components/Search';\nimport Filter  from './components/Filter';\nimport Results from './components/Results';\n\n//Queries\nimport { GET_INGREDIENTS } from './clients/Ingredient';\n\nclass Home extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      cookbook: this.props.cookbook,\n      cookbookFiltered: _.slice(this.props.cookbook, 0, 20),\n      filters: [],\n    };\n  }\n\n  addFilter = (ingredient) => {\n    this.setState(prevState => ({\n        filters: [...prevState.filters, ingredient]\n    }), () => this.updateFilter());\n  }\n\n  removeFilter = (ingredient) => {\n    this.setState(prevState => ({\n      filters: _.filter(prevState.filters, (filter) => {\n        return filter !== ingredient\n      })\n    }), () => this.updateFilter());\n  }\n\n  updateFilter = (times) => {\n    this.setState({\n      cookbookFiltered: _.filter(this.state.cookbook, (recipe) => {\n        if (times) {\n          //Filter cooking time duration in minutes\n          if (times.cookingtime) {\n            if (\n              recipe.cookingtime > times.cookingtime.max ||\n              recipe.cookingtime < times.cookingtime.min\n            ) return false;\n          }\n\n          //Filter work time duration in minutes\n          if (times.worktime) {\n            if (\n              recipe.worktime > times.worktime.max ||\n              recipe.worktime < times.worktime.min\n            ) return false;\n          }\n        }\n\n        //Filter recipes with selected ingredients\n        return _.difference(_.map(this.state.filters, 'id'), _.map(recipe.ingredients, 'idIngredient')).length === 0\n      })\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Query query={GET_INGREDIENTS}>\n          {({ data }) => {\n            return (\n              <Search\n                filterByIngredient={this.addFilter}\n                ingredients={data.ingredients}\n                autoFocus={true} />\n            )\n          }}\n        </Query>\n        <Filter updateFilter={this.updateFilter} removeFilter={this.removeFilter} filters={this.state.filters} />\n        <hr />\n        <Results items={this.state.cookbookFiltered} filters={this.state.filters} />\n\n        <div className=\"Button\"><Link to=\"/add\">+</Link></div>\n      </div>\n    );\n  }\n}\n\nexport default Home;\n","import _ from 'lodash';\nimport gql from 'graphql-tag';\n\n//Define\nexport const RECIPE_TYPE = 'Recipe';\n\n//Queries\nexport const GET_RECIPES = gql`\n  query {\n\tcookbook @client {\n\t\tid,\n\t\ttitle,\n\t\tbook,\n\t\tpage,\n\t\tpeople,\n\t\tcookingtime,\n\t\tworktime,\n\t\tdescription,\n\t\tingredients {\n\t\t\tidIngredient,\n\t\t\tname,\n\t\t\tqtx,\n\t\t}\n\t}\n  }\n`;\n\nexport const GET_RECIPE = gql`\n\tquery {\n\t\tgetRecipe(id: $id) @client {\n\t\t\tid,\n\t\t\ttitle,\n\t\t\tbook,\n\t\t\tpage,\n\t\t\tpeople,\n\t\t\tcookingtime,\n\t\t\tworktime,\n\t\t\tdescription,\n\t\t\tingredients {\n\t\t\t\tidIngredient,\n\t\t\t\tname,\n\t\t\t\tqtx,\n\t\t\t}\n\t\t}\n\t}\n`;\n\nexport const ADD_RECIPE = gql`\n\tmutation addRecipe($title: String!, $book: String!, $page: Int!, $people: Int!, $cookingtime: Int!, $worktime: Int!, $description: String!, $ingredients: [RecipeIngredient]) {\n\t\taddRecipe(title: $title, book: $book, page: $page, people: $people, cookingtime: $cookingtime, worktime: $worktime, description: $description, ingredients: $ingredients) @client\n\t}\n`;\n\nexport const DELETE_RECIPE = gql`\n\tmutation deleteRecipe($id: ID!) {\n\t\tdeleteRecipe(id: $id) @client\n\t}\n`;\n\n//Resolvers\nexport const resolvers = {\n\tQuery: {\n\n\t\t//Get single recipe\n\t\t//Input: ID\n\t\t//Output: Recipe\n\t\tgetRecipe: (_, { id }, { cache }) => {\n\t\t\tconst { cookbook } = cache.readQuery({ query: GET_RECIPES });\n\t\t\treturn cookbook.filter(recipe => recipe.id == id)[0];\n\t\t},\n\t},\n\tMutation: {\n\n\t\t//Add recipe\n\t\t//Input: title, description, ingredients list\n\t\t//Output: Created recipe\n\t\taddRecipe(__, { title, book, page, people, cookingtime, worktime, description, ingredients }, { cache }) {\n\t\t\tconst previous = cache.readQuery({ query: GET_RECIPES });\n\t\t\tconst newRecipe = {\n\t\t\t\t__typename: RECIPE_TYPE,\n\t\t\t\tid: (previous.cookbook.length) ? _.maxBy(previous.cookbook, 'id').id + 1 : 1,\n\t\t\t\ttitle,\n\t\t\t\tbook,\n\t\t\t\tpage,\n\t\t\t\tpeople,\n\t\t\t\tcookingtime,\n\t\t\t\tworktime,\n\t\t\t\tdescription,\n\t\t\t\tingredients,\n\t\t\t};\n\t\t\tconst data = {\n\t\t\t\tcookbook: [...previous.cookbook, newRecipe],\n\t\t\t};\n\t\t\tcache.writeData({ data });\n\t\t\treturn newRecipe;\n\t\t},\n\n\t\t//Delete one recipe\n\t\t//Input: ID\n\t\tdeleteRecipe(_, { id }, { cache }) {\n\t\t\tconst previous = cache.readQuery({ query: GET_RECIPES });\n\t\t\tconst data = {\n\t\t\t\tcookbook: previous.cookbook.filter(i => i.id != id)\n\t\t\t}\n\t\t\tcache.writeData({ data });\n\t\t\treturn true;\n\t\t},\n\t}\n};\n\n","import React, { Component } from 'react';\nimport { Link } from \"react-router-dom\";\nimport { Query, Mutation } from 'react-apollo';\n\n//Components\nimport Search from './components/Search';\n\n//Styles\nimport './App.scss';\n\n//Queries\nimport { GET_INGREDIENTS } from './clients/Ingredient';\nimport { ADD_RECIPE, DELETE_RECIPE } from './clients/Recipe';\n\nclass Recipe extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tif (this.props.recipe) {\n\t\t\tthis.state = { ...this.props.recipe };\n\t\t} else {\n\t\t\tthis.state = {\n\t\t\t\tid: null,\n\t\t\t\ttitle: '',\n\t\t\t\tbook: '',\n\t\t\t\tpage: '',\n\t\t\t\tpeople: '',\n\t\t\t\tcookingtime: '',\n\t\t\t\tworktime: '',\n\t\t\t\tdescription: '',\n\t\t\t\tingredients: []\n\t\t\t}\n\t\t}\n\t}\n\n\thandleInputChange = (event) => {\n\t\tconst target = event.target;\n\t\tconst value  = target.value;\n\t\tconst name   = target.name;\n\n\t\tthis.setState({\n\t\t\t[name]: value\n\t\t});\n\t}\n\n\thandleInputQuantityChange = (event) => {\n\t\tlet toUpdate = event.target.attributes['data-pos'].value;\n\t\tlet value    = event.target.value;\n\t\tthis.setState(prevState => {\n\t\t\tprevState.ingredients[toUpdate].qtx = value;\n\t\t\treturn prevState;\n\t\t});\n\t}\n\n\thandleInputDeletion = (row) => {\n\t\tthis.setState(prevState => {\n\t\t\tprevState.ingredients.splice(row, 1);\n\t\t\treturn prevState;\n\t\t});\n\t}\n\n\taddIngredient = (ingredient) => {\n\t\tthis.setState(prevState => ({\n\t\t\tingredients: [...prevState.ingredients, {\n\t\t\t\t__typename: 'RecipeIngredient',\n\t\t\t\tidIngredient: ingredient.id,\n\t\t\t\tname: ingredient.name,\n\t\t\t\tqtx: ''\n\t\t\t}]\n\t\t}));\n\t}\n\n\tredirectToHome = () => {\n\t\tthis.props.history.push(`/`);\n\t}\n\n\trender() {\n\t\tlet params = { };\n\n\t\t//Readonly mode\n\t\tif (this.state.id) {\n\t\t\tparams = { readOnly: 'readOnly' };\n\t\t}\n\n\t\tlet n = 0;\n\t\tlet ingredientsList = this.state.ingredients.map((ingredient) => {\n\t\t\tlet row = n; n++;\n\t\t\treturn (\n\t\t\t\t<div className=\"row\" key={row}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tdisabled\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tvalue={ingredient.name} />\n\t\t\t\t\t<input\n\t\t\t\t\t\t{...params}\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tdata-pos={row}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"Quantity\"\n\t\t\t\t\t\tonChange={this.handleInputQuantityChange}\n\t\t\t\t\t\tvalue={ingredient.qtx} />\n\n\t\t\t\t\t{!this.state.id ? (<label onClick={() => this.handleInputDeletion(row)}>&times;</label>) : null }\n\t\t\t\t\t<br />\n\t\t\t\t</div>\n\t\t\t)\n\t\t});\n\n\t\treturn (\n\t\t\t<div className=\"App Recipe\">\n\t\t\t\t<Link to=\"/\"><div className=\"close\">&times;</div></Link>\n\n\t\t\t\t<form>\n\t\t\t\t\t<label>Title\n\t\t\t\t\t<input\n\t\t\t\t\t\t{...params}\n\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tvalue={this.state.title}\n\t\t\t\t\t\tplaceholder=\"Recipe title\"\n\t\t\t\t\t\tautoFocus={true}\n\t\t\t\t\t\tonChange={this.handleInputChange} />\n\t\t\t\t\t</label>\n\n\t\t\t\t\t<label>Book\n\t\t\t\t\t<div className=\"flex\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\tname=\"book\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tvalue={this.state.book}\n\t\t\t\t\t\t\tplaceholder=\"Book reference\"\n\t\t\t\t\t\t\tonChange={this.handleInputChange} />\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\tname=\"page\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tvalue={this.state.page}\n\t\t\t\t\t\t\tplaceholder=\"Page\"\n\t\t\t\t\t\t\tstyle={{width:'40px'}}\n\t\t\t\t\t\t\tonChange={this.handleInputChange} />\n\t\t\t\t\t</div>\n\t\t\t\t\t</label>\n\n\t\t\t\t\t<label>Peoples\n\t\t\t\t\t<input\n\t\t\t\t\t\t{...params}\n\t\t\t\t\t\tname=\"people\"\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tvalue={this.state.people}\n\t\t\t\t\t\tplaceholder=\"1..15\"\n\t\t\t\t\t\tonChange={this.handleInputChange} />\n\t\t\t\t\t</label>\n\n\t\t\t\t\t<label>Duration\n\t\t\t\t\t<div className=\"flex\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\tname=\"worktime\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tvalue={this.state.worktime}\n\t\t\t\t\t\t\tplaceholder=\"Working (mn)\"\n\t\t\t\t\t\t\tonChange={this.handleInputChange} />\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\tname=\"cookingtime\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tvalue={this.state.cookingtime}\n\t\t\t\t\t\t\tplaceholder=\"Cooking (mn)\"\n\t\t\t\t\t\t\tonChange={this.handleInputChange} />\n\t\t\t\t\t</div>\n\t\t\t\t\t</label>\n\n\t\t\t\t\t<label>Description\n\t\t\t\t\t<input\n\t\t\t\t\t\t{...params}\n\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tvalue={this.state.description}\n\t\t\t\t\t\tplaceholder=\"(Optional)\"\n\t\t\t\t\t\tonChange={this.handleInputChange} />\n\t\t\t\t\t</label>\n\n\n\t\t\t\t\t{ !this.state.id  ? (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<label>Ingredients list</label>\n\t\t\t\t\t\t\t<Query query={GET_INGREDIENTS}>\n\t\t\t\t\t\t\t\t{({ data }) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<Search\n\t\t\t\t\t\t\t\t\t\t\t\tfilterByIngredient={this.addIngredient}\n\t\t\t\t\t\t\t\t\t\t\t\tingredients={data.ingredients}\n\t\t\t\t\t\t\t\t\t\t\t\tallowNew={true} />\n\t\t\t\t\t\t\t\t\t\t\t{ingredientsList}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t</Query>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t{ ingredientsList }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t</form>\n\n\t\t\t\t{ this.state.id ? (\n\t\t\t\t\t<Mutation\n\t\t\t\t\t\tmutation={DELETE_RECIPE}\n\t\t\t\t\t\tvariables={{ id: this.state.id }}\n\t\t\t\t\t\tonCompleted={() => this.redirectToHome() }>\n\t\t\t\t\t\t\t{deleteRecipe => (\n\t\t\t\t\t\t\t\t<div className=\"Button delete\" onClick={deleteRecipe}>DELETE</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t</Mutation>\n\t\t\t\t) : (\n\t\t\t\t\t<Mutation\n\t\t\t\t\t\tmutation={ADD_RECIPE}\n\t\t\t\t\t\tvariables={this.state}\n\t\t\t\t\t\tonCompleted={() => this.redirectToHome() }>\n\t\t\t\t\t\t\t{addRecipe => (\n\t\t\t\t\t\t\t\t<div className=\"Button\" onClick={addRecipe}>&#10004;</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t</Mutation>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Recipe;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { merge } from 'lodash';\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport { ApolloProvider, Query } from 'react-apollo';\nimport { ApolloClient } from 'apollo-client';\nimport { InMemoryCache } from 'apollo-cache-inmemory';\nimport { persistCache } from 'apollo-cache-persist';\n\nimport * as serviceWorker from './serviceWorker';\n\n//Style\nimport './index.scss';\n\n//Page\nimport Home from './Home';\nimport Recipe from './Recipe';\n\n//Queries\nimport { GET_RECIPES, GET_RECIPE } from './clients/Recipe';\n\n//Resolvers\nimport { resolvers as ingredientResolvers } from './clients/Ingredient';\nimport { resolvers as recipeResolvers } from './clients/Recipe';\n\nconst cache  = new InMemoryCache();\npersistCache({ cache, storage: window.localStorage }).then(() => {\n\t//Initialize state\n\tif (!window.localStorage.getItem('apollo-cache-persist')) {\n\t\tconsole.warn(\"Cache is empty, applying initial state.\");\n\t\tcache.writeData({\n\t\t\tdata: {\n\t\t\t\t//List of all available ingredients\n\t\t\t\tingredients: [ ],\n\t\t\t\t//List of all available recipes\n\t\t\t\tcookbook: [ ]\n\t\t\t}\n\t\t});\n\t}\n\n\tconst client = new ApolloClient({\n\t\tcache,\n\t\tresolvers: merge(\n\t\t\tingredientResolvers,\n\t\t\trecipeResolvers,\n\t\t)\n\t});\n\n\tReactDOM.render(\n\t\t<ApolloProvider client={client}>\n\t\t\t<Query query={GET_RECIPES}>\n\t\t\t\t{({ loading, error, data }) => {\n\t\t\t\t\tif (loading) return <span>loading...</span>\n\t\t\t\t\tif (error)   return <span>Oops..</span>\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Router basename={process.env.PUBLIC_URL}>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Route exact path=\"/\" render={(props) => <Home {...props} cookbook={data.cookbook} />} />\n\t\t\t\t\t\t\t\t<Route exact path=\"/add\" component={Recipe} />\n\t\t\t\t\t\t\t\t<Route exact path=\"/recipe/:id\" render={(r) =>\n\t\t\t\t\t\t\t\t\t<Query query={GET_RECIPE} variables={{ id: r.match.params.id }}>\n\t\t\t\t\t\t\t\t\t\t{({ loading, error, data: { getRecipe } }) => {\n\t\t\t\t\t\t\t\t\t\t\tif (loading) return <span>loading...</span>\n\t\t\t\t\t\t\t\t\t\t\tif (error)   return <span>Oops..</span>\n\n\t\t\t\t\t\t\t\t\t\t\treturn (<Recipe recipe={getRecipe} history={r.history} />);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t</Query>\n\t\t\t\t\t\t\t\t } />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Router>\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t</Query>\n\t\t</ApolloProvider>,\n\t\tdocument.getElementById('root')\n\t);\n});\n\nserviceWorker.register();\n"],"sourceRoot":""}