{"version":3,"sources":["serviceWorker.js","clients/Ingredient.js","components/Search.js","components/Filter.js","components/Results.js","Home.js","clients/Recipe.js","Recipe.js","index.js"],"names":["isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","GET_INGREDIENTS","gql","_templateObject","ADD_INGREDIENT","_templateObject2","resolvers","Mutation","addIngredient","__","_ref","_ref2","name","cache","previous","readQuery","query","newIngredient","__typename","id","ingredients","length","_","maxBy","data","concat","Object","toConsumableArray","writeData","Search","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleValidate","event","key","current","head","suggests","isNew","addToFilter","handleChange","exist","value","target","slice","filter","ingredient","startsWith","toLower","allowNew","unshift","clear","setState","suggest","filterByIngredient","_input","focus","autoFocus","bind","assertThisInitialized","scrollTo","suggestsEnd","scrollHeight","_this2","map","react_default","a","createElement","react_apollo_esm","mutation","variables","onCompleted","onClick","className","ref","c","onChange","onKeyPress","placeholder","div","Component","Filter","remove","removeFilter","update","time","updateFilter","filters","cookingtime","min","max","worktime","js_default","maxValue","minValue","formatLabel","Results","listItems","items","item","react_router_dom","to","title","book","description","Home","addFilter","prevState","times","cookbookFiltered","cookbook","recipe","difference","components_Search","components_Filter","components_Results","GET_RECIPES","Recipe_templateObject","GET_RECIPE","Recipe_templateObject2","ADD_RECIPE","_templateObject3","DELETE_RECIPE","_templateObject4","Query","getRecipe","addRecipe","_ref3","_ref4","page","people","newRecipe","deleteRecipe","_ref5","_ref6","i","Recipe","handleInputChange","defineProperty","handleInputQuantityChange","toUpdate","attributes","qtx","handleInputDeletion","row","splice","idIngredient","redirectToHome","history","push","objectSpread","params","readOnly","n","ingredientsList","disabled","type","assign","data-pos","style","width","InMemoryCache","persistCache","storage","localStorage","getItem","warn","client","ApolloClient","merge","ingredientResolvers","recipeResolvers","ReactDOM","render","loading","basename","process","react_router","exact","path","src_Home","component","r","src_Recipe","document","getElementById","URL","href","origin","addEventListener","fetch","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.cde8ce16.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import _ from 'lodash';\nimport gql from 'graphql-tag';\n\n//Define\nexport const INGREDIENT_TYPE = 'Ingredient';\n\n//Queries\nexport const GET_INGREDIENTS = gql`\n\tquery {\n\t\tingredients @client {\n\t\t\tid,\n\t\t\tname\n\t\t}\n\t}\n`;\n\nexport const ADD_INGREDIENT = gql`\n\tmutation addIngredient($name: String!) {\n\t\taddIngredient(name: $name) @client\n\t}\n`;\n\n//Resolvers\nexport const resolvers = {\n\tMutation: {\n\n\t\t//Add Ingredient\n\t\t//Input: name\n\t\t//Output: Created Ingredient\n\t\taddIngredient(__, { name }, { cache }) {\n\t\t\tconst previous = cache.readQuery({ query: GET_INGREDIENTS });\n\t\t\tconst newIngredient = {\n\t\t\t\t__typename: INGREDIENT_TYPE,\n\t\t\t\tid: (previous.ingredients.length) ? _.maxBy(previous.ingredients, 'id').id + 1 : 1,\n\t\t\t\tname\n\t\t\t};\n\t\t\tconst data = {\n\t\t\t\tingredients: [...previous.ingredients, newIngredient],\n\t\t\t};\n\t\t\tcache.writeData({ data });\n\t\t\treturn newIngredient;\n\t\t},\n\t}\n};","import React, { Component } from 'react';\nimport { Mutation } from 'react-apollo';\nimport _ from 'lodash';\n\nimport '../App.scss';\n\n//Queries\nimport { ADD_INGREDIENT } from '../clients/Ingredient';\n\nclass Search extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tallowNew:  this.props.allowNew  ? true : false,\n\t\t\tautoFocus: this.props.autoFocus ? true : false,\n\t\t\tvalue:     '',\n\t\t\tsuggests:  []\n\t\t};\n\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t}\n\n\tcomponentDidUpdate() {\n\t\tif (this.state.allowNew) {\n\t\t\t//Scroll to the end of the suggests list\n\t\t\twindow.scrollTo(0, this.suggestsEnd.scrollHeight);\n\t\t}\n\t}\n\n\thandleValidate = (event) => {\n\t\t//Handle validate action and add the first suggest\n\t\tif (event.key == 'Enter') {\n\t\t\tlet current = _.head(this.state.suggests);\n\t\t\tif (current && !current.isNew) {\n\t\t\t\tthis.addToFilter(_.head(this.state.suggests));\n\t\t\t}\n\t\t}\n\t}\n\n\thandleChange = (event) => {\n\t\t//Suggestion based on available app ingredients (5 items maximum)\n\t\tlet exist    = false;\n\t\tlet value    = event.target.value;\n\t\tlet suggests = _.slice(_.filter(this.props.ingredients, (ingredient) => {\n\t\t\tif (ingredient.name == value) exist = true;\n\t\t\treturn _.startsWith(ingredient.name, _.toLower(value));\n\t\t}), 0, 5);\n\n\t\t//Allow adding new ingredient\n\t\tif (this.state.allowNew && !exist && value != \"\") {\n\t\t\tsuggests.unshift({\n\t\t\t\tid:    0,\n\t\t\t\tname:  _.toLower(value),\n\t\t\t\tisNew: true,\n\t\t\t});\n\t\t}\n\n\t\tif (value == \"\") {\n\t\t\tthis.clear();\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tvalue,\n\t\t\t\tsuggests\n\t\t\t});\n\t\t}\n\t}\n\n\tclear = () => {\n\t\tthis.setState({\n\t\t\tvalue: '',\n\t\t\tsuggests: []\n\t\t})\n\t}\n\n\taddToFilter = (suggest) => {\n\t\tthis.props.filterByIngredient(suggest);\n\t\tthis.clear();\n\n\t\t//Force autofocus after component update\n\t\tthis._input.focus();\n\t}\n\n\trender() {\n\t\tconst suggests = this.state.suggests.map((suggest) => {\n\t\t\tif (!suggest.isNew)\n\t\t\t\treturn (\n\t\t\t\t\t<li\n\t\t\t\t\t\tkey={`s_${suggest.id}`}\n\t\t\t\t\t\tonClick={() => this.addToFilter(suggest)}>\n\t\t\t\t\t\t{suggest.name}\n\t\t\t\t\t</li>\n\t\t\t\t);\n\n\t\t\treturn (\n\t\t\t\t<Mutation\n\t\t\t\t\tmutation={ADD_INGREDIENT}\n\t\t\t\t\tvariables={{ name : suggest.name }}\n\t\t\t\t\tonCompleted={({addIngredient}) => this.addToFilter(addIngredient)}>\n\t\t\t\t\t{addIngredient => (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tkey={`s_${suggest.id}`}\n\t\t\t\t\t\t\tonClick={addIngredient}>\n\t\t\t\t\t\t\t(+) {suggest.name}..\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)}\n\t\t\t\t</Mutation>\n\t\t\t)\n\t\t});\n\n\t\treturn (\n\t\t\t<div className=\"Search\">\n\t\t\t\t<input\n\t\t\t\t\tref={c => (this._input = c)}\n\t\t\t\t\tautoFocus={this.state.autoFocus}\n\t\t\t\t\tvalue={this.state.value}\n\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\tonKeyPress={this.handleValidate}\n\t\t\t\t\tplaceholder=\"Search ingredients..\"\n\t\t\t\t/>\n\t\t\t\t<ul className=\"Suggests\" ref={(div) => {\n\t\t\t\t\tthis.suggestsEnd = div;\n\t\t\t\t}}>{suggests}</ul>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Search;\n","import React, { Component } from 'react';\nimport InputRange from 'react-input-range';\n\nimport '../App.scss';\nimport 'react-input-range/lib/css/index.css';\n\nclass Filter extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\t//Default (in minutes)\n\t\t\tcookingtime: { min: 0, max: 120 },\n\t\t\tworktime:    { min: 0, max: 120 }\n\t\t};\n\t}\n\n\tremove = (suggest) => {\n\t\tthis.props.removeFilter(suggest);\n\t}\n\n\tupdate = (time) => {\n\t\tthis.setState(time, () => {\n\t\t\tthis.props.updateFilter(this.state);\n\t\t});\n\t}\n\n\tfilters = (props) => {\n\t\treturn props.filters.map((filter) => {\n\t\t\treturn <li key={`f_${filter.id}`} onClick={() => this.remove(filter)}>{filter.name}</li>\n\t\t})\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"Filter\">\n\t\t\t\t<p className=\"label\">Prep time (mn)</p>\n\t\t\t\t<InputRange\n\t\t\t\t\tmaxValue={120}\n\t\t\t\t\tminValue={0}\n\t\t\t\t\tformatLabel={value => `${value}`}\n\t\t\t\t\tvalue={this.state.worktime}\n\t\t\t\t\tonChange={worktime => this.update({ worktime })} />\n\n\t\t\t\t<p className=\"label\">Cooking time (mn)</p>\n\t\t\t\t<InputRange\n\t\t\t\t\tmaxValue={120}\n\t\t\t\t\tminValue={0}\n\t\t\t\t\tformatLabel={value => `${value}`}\n\t\t\t\t\tvalue={this.state.cookingtime}\n\t\t\t\t\tonChange={cookingtime => this.update({ cookingtime })} />\n\n\t\t\t\t<ul>\n\t\t\t\t\t{this.filters(this.props)}\n\t\t\t\t</ul>\n\n\t\t\t\t<p className=\"clear\">&times; Clear filter</p>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Filter;\n","import React, { Component } from 'react';\nimport { Link } from \"react-router-dom\";\n\nimport '../App.scss';\n\nclass Results extends Component {\n\n\tlistItems = (props) => {\n\t\treturn props.items.map((item) => {\n\t\t\treturn (\n\t\t\t\t<Link key={`r_${item.id}`} to={`/recipe/${item.id}`}>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<div className=\"title\">{item.title}</div>\n\t\t\t\t\t\t<div className=\"book\">{item.book}</div>\n\t\t\t\t\t\t<div className=\"desc\">{item.description}</div>\n\t\t\t\t\t\t<div className=\"items\">{props.filters.length} / {item.ingredients.length} required</div>\n\t\t\t\t\t</li>\n\t\t\t\t</Link>\n\t\t\t)\n\t\t})\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<ul className=\"Results\">\n\t\t\t\t{this.listItems(this.props)}\n\t\t\t</ul>\n\t\t);\n\t}\n}\n\nexport default Results;\n","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport { Query } from 'react-apollo';\nimport { Link } from \"react-router-dom\";\n\n//Styles\nimport './App.scss';\n\n//Components\nimport Search  from './components/Search';\nimport Filter  from './components/Filter';\nimport Results from './components/Results';\n\n//Queries\nimport { GET_INGREDIENTS } from './clients/Ingredient';\n\nclass Home extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      cookbook: this.props.cookbook,\n      cookbookFiltered: _.slice(this.props.cookbook, 0, 20),\n      filters: [],\n    };\n  }\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n  }\n\n  addFilter = (ingredient) => {\n    this.setState(prevState => ({\n        filters: [...prevState.filters, ingredient]\n    }), () => this.updateFilter());\n  }\n\n  removeFilter = (ingredient) => {\n    this.setState(prevState => ({\n      filters: _.filter(prevState.filters, (filter) => {\n        return filter !== ingredient\n      })\n    }), () => this.updateFilter());\n  }\n\n  updateFilter = (times) => {\n    this.setState({\n      cookbookFiltered: _.filter(this.state.cookbook, (recipe) => {\n        if (times) {\n          //Filter cooking time duration in minutes\n          if (times.cookingtime) {\n            if (\n              recipe.cookingtime > times.cookingtime.max ||\n              recipe.cookingtime < times.cookingtime.min\n            ) return false;\n          }\n\n          //Filter work time duration in minutes\n          if (times.worktime) {\n            if (\n              recipe.worktime > times.worktime.max ||\n              recipe.worktime < times.worktime.min\n            ) return false;\n          }\n        }\n\n        //Filter recipes with selected ingredients\n        return _.difference(_.map(this.state.filters, 'id'), _.map(recipe.ingredients, 'idIngredient')).length === 0\n      })\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Query query={GET_INGREDIENTS}>\n          {({ data }) => {\n            return (\n              <Search\n                filterByIngredient={this.addFilter}\n                ingredients={data.ingredients}\n                autoFocus={false} />\n            )\n          }}\n        </Query>\n        <Filter updateFilter={this.updateFilter} removeFilter={this.removeFilter} filters={this.state.filters} />\n        <hr />\n        <Results items={this.state.cookbookFiltered} filters={this.state.filters} />\n\n        <Link to=\"/add\"><div className=\"Button\">+</div></Link>\n      </div>\n    );\n  }\n}\n\nexport default Home;\n","import _ from 'lodash';\nimport gql from 'graphql-tag';\n\n//Define\nexport const RECIPE_TYPE = 'Recipe';\n\n//Queries\nexport const GET_RECIPES = gql`\n  query {\n\tcookbook @client {\n\t\tid,\n\t\ttitle,\n\t\tbook,\n\t\tpage,\n\t\tpeople,\n\t\tcookingtime,\n\t\tworktime,\n\t\tdescription,\n\t\tingredients {\n\t\t\tidIngredient,\n\t\t\tname,\n\t\t\tqtx,\n\t\t}\n\t}\n  }\n`;\n\nexport const GET_RECIPE = gql`\n\tquery {\n\t\tgetRecipe(id: $id) @client {\n\t\t\tid,\n\t\t\ttitle,\n\t\t\tbook,\n\t\t\tpage,\n\t\t\tpeople,\n\t\t\tcookingtime,\n\t\t\tworktime,\n\t\t\tdescription,\n\t\t\tingredients {\n\t\t\t\tidIngredient,\n\t\t\t\tname,\n\t\t\t\tqtx,\n\t\t\t}\n\t\t}\n\t}\n`;\n\nexport const ADD_RECIPE = gql`\n\tmutation addRecipe($title: String!, $book: String!, $page: Int!, $people: Int!, $cookingtime: Int!, $worktime: Int!, $description: String!, $ingredients: [RecipeIngredient]) {\n\t\taddRecipe(title: $title, book: $book, page: $page, people: $people, cookingtime: $cookingtime, worktime: $worktime, description: $description, ingredients: $ingredients) @client\n\t}\n`;\n\nexport const DELETE_RECIPE = gql`\n\tmutation deleteRecipe($id: ID!) {\n\t\tdeleteRecipe(id: $id) @client\n\t}\n`;\n\n//Resolvers\nexport const resolvers = {\n\tQuery: {\n\n\t\t//Get single recipe\n\t\t//Input: ID\n\t\t//Output: Recipe\n\t\tgetRecipe: (_, { id }, { cache }) => {\n\t\t\tconst { cookbook } = cache.readQuery({ query: GET_RECIPES });\n\t\t\treturn cookbook.filter(recipe => recipe.id == id)[0];\n\t\t},\n\t},\n\tMutation: {\n\n\t\t//Add recipe\n\t\t//Input: title, description, ingredients list\n\t\t//Output: Created recipe\n\t\taddRecipe(__, { title, book, page, people, cookingtime, worktime, description, ingredients }, { cache }) {\n\t\t\tconst previous = cache.readQuery({ query: GET_RECIPES });\n\t\t\tconst newRecipe = {\n\t\t\t\t__typename: RECIPE_TYPE,\n\t\t\t\tid: (previous.cookbook.length) ? _.maxBy(previous.cookbook, 'id').id + 1 : 1,\n\t\t\t\ttitle,\n\t\t\t\tbook,\n\t\t\t\tpage,\n\t\t\t\tpeople,\n\t\t\t\tcookingtime,\n\t\t\t\tworktime,\n\t\t\t\tdescription,\n\t\t\t\tingredients,\n\t\t\t};\n\t\t\tconst data = {\n\t\t\t\tcookbook: [...previous.cookbook, newRecipe],\n\t\t\t};\n\t\t\tcache.writeData({ data });\n\t\t\treturn newRecipe;\n\t\t},\n\n\t\t//Delete one recipe\n\t\t//Input: ID\n\t\tdeleteRecipe(_, { id }, { cache }) {\n\t\t\tconst previous = cache.readQuery({ query: GET_RECIPES });\n\t\t\tconst data = {\n\t\t\t\tcookbook: previous.cookbook.filter(i => i.id != id)\n\t\t\t}\n\t\t\tcache.writeData({ data });\n\t\t\treturn true;\n\t\t},\n\t}\n};\n\n","import React, { Component } from 'react';\nimport { Link } from \"react-router-dom\";\nimport { Query, Mutation } from 'react-apollo';\n\n//Components\nimport Search from './components/Search';\n\n//Styles\nimport './App.scss';\n\n//Queries\nimport { GET_INGREDIENTS } from './clients/Ingredient';\nimport { ADD_RECIPE, DELETE_RECIPE } from './clients/Recipe';\n\nclass Recipe extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tif (this.props.recipe) {\n\t\t\tthis.state = { ...this.props.recipe };\n\t\t} else {\n\t\t\tthis.state = {\n\t\t\t\tid: null,\n\t\t\t\ttitle: '',\n\t\t\t\tbook: '',\n\t\t\t\tpage: '',\n\t\t\t\tpeople: '',\n\t\t\t\tcookingtime: '',\n\t\t\t\tworktime: '',\n\t\t\t\tdescription: '',\n\t\t\t\tingredients: []\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.scrollTo(0, 0);\n\t}\n\n\thandleInputChange = (event) => {\n\t\tconst target = event.target;\n\t\tconst value  = target.value;\n\t\tconst name   = target.name;\n\n\t\tthis.setState({\n\t\t\t[name]: value\n\t\t});\n\t}\n\n\thandleInputQuantityChange = (event) => {\n\t\tlet toUpdate = event.target.attributes['data-pos'].value;\n\t\tlet value    = event.target.value;\n\t\tthis.setState(prevState => {\n\t\t\tprevState.ingredients[toUpdate].qtx = value;\n\t\t\treturn prevState;\n\t\t});\n\t}\n\n\thandleInputDeletion = (row) => {\n\t\tthis.setState(prevState => {\n\t\t\tprevState.ingredients.splice(row, 1);\n\t\t\treturn prevState;\n\t\t});\n\t}\n\n\taddIngredient = (ingredient) => {\n\t\tthis.setState(prevState => ({\n\t\t\tingredients: [...prevState.ingredients, {\n\t\t\t\t__typename: 'RecipeIngredient',\n\t\t\t\tidIngredient: ingredient.id,\n\t\t\t\tname: ingredient.name,\n\t\t\t\tqtx: ''\n\t\t\t}]\n\t\t}));\n\t}\n\n\tredirectToHome = () => {\n\t\tthis.props.history.push(`/`);\n\t}\n\n\trender() {\n\t\tlet params = { };\n\n\t\t//Readonly mode\n\t\tif (this.state.id) {\n\t\t\tparams = { readOnly: 'readOnly' };\n\t\t}\n\n\t\tlet n = 0;\n\t\tlet ingredientsList = this.state.ingredients.map((ingredient) => {\n\t\t\tlet row = n; n++;\n\t\t\treturn (\n\t\t\t\t<div className=\"row\" key={row}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tdisabled\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tvalue={ingredient.name} />\n\t\t\t\t\t<input\n\t\t\t\t\t\t{...params}\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tdata-pos={row}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"Quantity\"\n\t\t\t\t\t\tonChange={this.handleInputQuantityChange}\n\t\t\t\t\t\tvalue={ingredient.qtx} />\n\n\t\t\t\t\t{!this.state.id ? (<label onClick={() => this.handleInputDeletion(row)}>&times;</label>) : null }\n\t\t\t\t\t<br />\n\t\t\t\t</div>\n\t\t\t)\n\t\t});\n\n\t\treturn (\n\t\t\t<div className=\"App Recipe\">\n\t\t\t\t<Link to=\"/\"><div className=\"close\">&times;</div></Link>\n\n\t\t\t\t<form>\n\t\t\t\t\t<label>Title\n\t\t\t\t\t<input\n\t\t\t\t\t\t{...params}\n\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tvalue={this.state.title}\n\t\t\t\t\t\tplaceholder=\"Recipe title\"\n\t\t\t\t\t\tonChange={this.handleInputChange} />\n\t\t\t\t\t</label>\n\n\t\t\t\t\t<label>Book\n\t\t\t\t\t<div className=\"flex\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\tname=\"book\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tvalue={this.state.book}\n\t\t\t\t\t\t\tplaceholder=\"Book reference\"\n\t\t\t\t\t\t\tonChange={this.handleInputChange} />\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\tname=\"page\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tvalue={this.state.page}\n\t\t\t\t\t\t\tplaceholder=\"Page\"\n\t\t\t\t\t\t\tstyle={{width:'40px'}}\n\t\t\t\t\t\t\tonChange={this.handleInputChange} />\n\t\t\t\t\t</div>\n\t\t\t\t\t</label>\n\n\t\t\t\t\t<label>Peoples\n\t\t\t\t\t<input\n\t\t\t\t\t\t{...params}\n\t\t\t\t\t\tname=\"people\"\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tvalue={this.state.people}\n\t\t\t\t\t\tplaceholder=\"1..15\"\n\t\t\t\t\t\tonChange={this.handleInputChange} />\n\t\t\t\t\t</label>\n\n\t\t\t\t\t<label>Duration\n\t\t\t\t\t<div className=\"flex\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\tname=\"worktime\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tvalue={this.state.worktime}\n\t\t\t\t\t\t\tplaceholder=\"Prep (mn)\"\n\t\t\t\t\t\t\tonChange={this.handleInputChange} />\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\tname=\"cookingtime\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tvalue={this.state.cookingtime}\n\t\t\t\t\t\t\tplaceholder=\"Cooking (mn)\"\n\t\t\t\t\t\t\tonChange={this.handleInputChange} />\n\t\t\t\t\t</div>\n\t\t\t\t\t</label>\n\n\t\t\t\t\t<label>Description\n\t\t\t\t\t<input\n\t\t\t\t\t\t{...params}\n\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tvalue={this.state.description}\n\t\t\t\t\t\tplaceholder=\"(Optional)\"\n\t\t\t\t\t\tonChange={this.handleInputChange} />\n\t\t\t\t\t</label>\n\n\n\t\t\t\t\t{ !this.state.id  ? (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<label>Ingredients list</label>\n\t\t\t\t\t\t\t<Query query={GET_INGREDIENTS}>\n\t\t\t\t\t\t\t\t{({ data }) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<Search\n\t\t\t\t\t\t\t\t\t\t\t\tfilterByIngredient={this.addIngredient}\n\t\t\t\t\t\t\t\t\t\t\t\tingredients={data.ingredients}\n\t\t\t\t\t\t\t\t\t\t\t\tallowNew={true} />\n\t\t\t\t\t\t\t\t\t\t\t{ingredientsList}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t</Query>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t{ ingredientsList }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t</form>\n\n\t\t\t\t{ this.state.id ? (\n\t\t\t\t\t<Mutation\n\t\t\t\t\t\tmutation={DELETE_RECIPE}\n\t\t\t\t\t\tvariables={{ id: this.state.id }}\n\t\t\t\t\t\tonCompleted={() => this.redirectToHome() }>\n\t\t\t\t\t\t\t{deleteRecipe => (\n\t\t\t\t\t\t\t\t<div className=\"Button delete\" onClick={deleteRecipe}>DELETE</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t</Mutation>\n\t\t\t\t) : (\n\t\t\t\t\t<Mutation\n\t\t\t\t\t\tmutation={ADD_RECIPE}\n\t\t\t\t\t\tvariables={this.state}\n\t\t\t\t\t\tonCompleted={() => this.redirectToHome() }>\n\t\t\t\t\t\t\t{addRecipe => (\n\t\t\t\t\t\t\t\t<div className=\"Button\" onClick={addRecipe}>&#x2714;</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t</Mutation>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Recipe;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { merge } from 'lodash';\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport { ApolloProvider, Query } from 'react-apollo';\nimport { ApolloClient } from 'apollo-client';\nimport { InMemoryCache } from 'apollo-cache-inmemory';\nimport { persistCache } from 'apollo-cache-persist';\n\nimport * as serviceWorker from './serviceWorker';\n\n//Style\nimport './index.scss';\n\n//Page\nimport Home from './Home';\nimport Recipe from './Recipe';\n\n//Queries\nimport { GET_RECIPES, GET_RECIPE } from './clients/Recipe';\n\n//Resolvers\nimport { resolvers as ingredientResolvers } from './clients/Ingredient';\nimport { resolvers as recipeResolvers } from './clients/Recipe';\n\nconst cache  = new InMemoryCache();\npersistCache({ cache, storage: window.localStorage }).then(() => {\n\t//Initialize state\n\tif (!window.localStorage.getItem('apollo-cache-persist')) {\n\t\tconsole.warn(\"Cache is empty, applying initial state.\");\n\t\tcache.writeData({\n\t\t\tdata: {\n\t\t\t\t//List of all available ingredients\n\t\t\t\tingredients: [ ],\n\t\t\t\t//List of all available recipes\n\t\t\t\tcookbook: [ ]\n\t\t\t}\n\t\t});\n\t}\n\n\tconst client = new ApolloClient({\n\t\tcache,\n\t\tresolvers: merge(\n\t\t\tingredientResolvers,\n\t\t\trecipeResolvers,\n\t\t)\n\t});\n\n\tReactDOM.render(\n\t\t<ApolloProvider client={client}>\n\t\t\t<Query query={GET_RECIPES}>\n\t\t\t\t{({ loading, error, data }) => {\n\t\t\t\t\tif (loading) return <span>loading...</span>\n\t\t\t\t\tif (error)   return <span>Oops..</span>\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Router basename={process.env.PUBLIC_URL}>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Route exact path=\"/\" render={(props) => <Home {...props} cookbook={data.cookbook} />} />\n\t\t\t\t\t\t\t\t<Route exact path=\"/add\" component={Recipe} />\n\t\t\t\t\t\t\t\t<Route exact path=\"/recipe/:id\" render={(r) =>\n\t\t\t\t\t\t\t\t\t<Query query={GET_RECIPE} variables={{ id: r.match.params.id }}>\n\t\t\t\t\t\t\t\t\t\t{({ loading, error, data: { getRecipe } }) => {\n\t\t\t\t\t\t\t\t\t\t\tif (loading) return <span>loading...</span>\n\t\t\t\t\t\t\t\t\t\t\tif (error)   return <span>Oops..</span>\n\n\t\t\t\t\t\t\t\t\t\t\treturn (<Recipe recipe={getRecipe} history={r.history} />);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t</Query>\n\t\t\t\t\t\t\t\t } />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Router>\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t</Query>\n\t\t</ApolloProvider>,\n\t\tdocument.getElementById('root')\n\t);\n});\n\nserviceWorker.register();\n"],"sourceRoot":""}